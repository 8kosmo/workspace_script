<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.util.*, com.google.gson.Gson" %>
<%
//Map으로 키값 정해주고 row값 넣어주고 List에 담는다
//pictureMain.html문서에서  ajax처리 메소드에서 호출하는 url 뒤에 query string문자열값 읽어오는 메소드
	String p_no = request.getParameter("p_no");
    List<Map<String,Object>> picList = new ArrayList<>();
    Map<String,Object> picInfo = new HashMap<>();
    picInfo.put("p_no",1);
    picInfo.put("p_img","1.jpg");
    picInfo.put("p_info","그림설명1");
    picList.add(picInfo);
    
    picInfo = new HashMap<>();
    picInfo.put("p_no",2);
    picInfo.put("p_img","2.jpg");
    picInfo.put("p_info","그림설명2");
    picList.add(picInfo);
    
    picInfo = new HashMap<>();
    picInfo.put("p_no",3);
    picInfo.put("p_img","3.jpg");
    picInfo.put("p_info","그림설명3");
    picList.add(picInfo);
    
    picInfo = new HashMap<>();
    picInfo.put("p_no",4);
    picInfo.put("p_img","4.jpg");
    picInfo.put("p_info","그림설명4");
    picList.add(picInfo);
    List<Map<String,Object>> picDetail = new ArrayList<>();
    Map<String,Object> picDetailMap = null;
    for(int i=0;i<picList.size();i++){
    	Map<String,Object> rmap = picList.get(i);
    	if(p_no.equals(rmap.get("p_no").toString())){
    		picDetailMap = rmap;
    		picDetail.add(picDetailMap);
    	}
    }
    //구글에서 제공하는 오픈API를 사용하여 JSON포맷으로 꺼내기(String으로)
    Gson g = new Gson();
    String result = g.toJson(picList);
    out.print(result);
%>